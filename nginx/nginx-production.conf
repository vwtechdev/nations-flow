# Configuração adicional para produção
# Este arquivo pode ser incluído no nginx.conf principal para otimizações específicas

# Cache de arquivos estáticos em memória
open_file_cache max=10000 inactive=5m;
open_file_cache_valid 2m;
open_file_cache_min_uses 1;
open_file_cache_errors on;

# Configurações de segurança adicionais
server_tokens off;
more_clear_headers 'Server';

# Configurações de buffer otimizadas
client_body_timeout 12;
client_header_timeout 12;
send_timeout 10;

# Configurações de proxy otimizadas
proxy_http_version 1.1;
proxy_set_header Connection "";
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=my_cache:10m max_size=1g inactive=60m use_temp_path=off;

# Configurações de compressão otimizadas
gzip_static on;
gzip_proxied expired no-cache no-store private auth;
gzip_min_length 1000;

# Configurações de rate limiting mais restritivas para produção
limit_req_zone $binary_remote_addr zone=login:10m rate=5r/m;
limit_req_zone $binary_remote_addr zone=api_strict:10m rate=5r/s;

# Configurações de conexão mais restritivas
limit_conn_zone $binary_remote_addr zone=conn_limit_per_ip:10m;
limit_conn_zone $server_name zone=conn_limit_per_server:10m;
